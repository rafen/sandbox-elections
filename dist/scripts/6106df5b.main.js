(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(){this.renderChart=b(this.renderChart,this),this.initialize=b(this.initialize,this),google.load("visualization","1.0",{packages:["corechart"]}),google.maps.event.addDomListener(window,"load",this.initialize),this.baseURL="http://rafen.webfactional.com/elections2015/kml/"}return a.prototype.initialize=function(){return this.loadMap(),this.loadStates(),this.renderStates(),this.bindEvents()},a.prototype.loadMap=function(){var a;return this.center=new google.maps.LatLng(-40.3863590950962,-63.831314974999984),a={zoom:4,center:this.center},this.map=new google.maps.Map(document.getElementById("map"),a),google.maps.event.addDomListener(window,"resize",function(a){return function(){var b;return b=a.map.getCenter(),google.maps.event.trigger(a.map,"resize"),a.map.setCenter(b)}}(this))},a.prototype.loadStates=function(){return this.states={buenosAires:{name:"Ciudad Autonoma de Buenos Aires",kmlURL:"caba.kml",values:[["PRO",47.3],["ECO",22.3],["FPV",18.7],["IZQ",2.3],["Otros",9.4]],colors:["#FEDB04","#7CC374","#1796D7","#FFAD5C","#E0EBEB"]},neuquen:{name:"Neuquen",kmlURL:"Neuquen.kml",values:[["MPN",37.86],["FPV",28.87],["PRO",19.45],["Otros",33.3]],colors:["#7CC374","#1796D7","#FEDB04","#E0EBEB"]}}},a.prototype.renderStates=function(){var a,b,c,d;c=this.states,d=[];for(a in c)b=c[a],d.push(this.renderState(a,b));return d},a.prototype.renderState=function(a,b){return this.states[a].kml=new google.maps.KmlLayer({url:this.baseURL+b.kmlURL+"?"+Math.random(),preserveViewport:!0}),this.states[a].kml.setMap(this.map)},a.prototype.bindEvents=function(){var a,b,c,d;c=this.states,d=[];for(a in c)b=c[a],d.push(this.bindEvent(a,b));return d},a.prototype.bindEvent=function(a,b){return google.maps.event.addListener(this.states[a].kml,"click",function(b){return function(c){return b.renderChart(b.states[a].values,b.states[a].name,b.states[a].colors),c.featureData.infoWindowHtml=$("#chart_div").html()}}(this))},a.prototype.renderChart=function(a,b,c){var d,e,f;return e=new google.visualization.DataTable,e.addColumn("string","Topping"),e.addColumn("number","Slices"),e.addRows(a),f={title:"Resultados "+b,width:350,height:350,colors:c},d=new google.visualization.PieChart(document.getElementById("chart_div")),d.draw(e,f)},a}(),window.elections=new a}).call(this);